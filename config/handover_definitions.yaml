---
h->o_types:
  cnvhistogram:
    id: 'pgx:handover:cnvhistogram'
    label: "CNV Histogram"
    description: "create a CNV histogram from matched callsets"
    h->o_key: 'callsets._id'
    script_path_web: '/cgi-bin/PGX/cgi/samplePlots.cgi'
  biosamples:
    id: 'pgx:handover:biosamples'
    label: "Biosamples"
    description: "retrieve data of the biosamples matched by the query"
    h->o_key: 'biosamples._id'
    script_path_web: '/beacon/biosamples'
  # biosampleslist:
  #   id: 'pgx:handover:biosampleslist'
  #   label: "Biosamples"
  #   description: "retrieve data of the biosamples matched by the query as simple JSON list"
  #   h->o_key: 'biosamples._id'
  #   script_path_web: '/services/biosamples'
  #   url_opts: "&responseFormat=simple"
  phenopackets:
    id: 'pgx:handover:phenopackets'
    label: "Phenopackets"
    description: "retrieve data of the phenopackets matched by the query"
    h->o_key: 'biosamples._id'
    # TODO: switch to /services/deliveries only w/ accessid (self scoping)
    # here, phenopackets actually want individuals; however, the phenopackets
    # service resolves this itself by forcing the retrieval of the matching
    # individuals 
    script_path_web: '/services/phenopackets'
  individualsdata:
    id: 'pgx:handover:individualsdata'
    label: "Individuals"
    description: "retrieve data of the individuals matched by the query"
    h->o_key: 'individuals._id'
    script_path_web: '/services/deliveries'
    url_opts: "&responseFormat=simple"
  # variantslist:
  #   id: 'pgx:handover:variantslist'
  #   label: "List of ound Variants"
  #   description: "retrieve variants matched by the query as JSON list of variant objects"
  #   h->o_key: 'variants._id'
  #   script_path_web: '/services/variants'
  #   url_opts: "&responseFormat=simple"
  variants:
    id: 'pgx:handover:variants'
    label: "Found Variants (.json)"
    description: "retrieve variants matched by the query"
    h->o_key: 'variants._id'
    script_path_web: '/beacon/variants'
  pgxseg:
    id: 'pgx:handover:pgxseg'
    label: "Found Variants (.pgxseg)"
    description: "retrieve variants matched by the query as .pgxseg download"
    h->o_key: 'variants._id'
    script_path_web: '/beacon/variants'
  callsetsvariants:
    id: 'pgx:handover:callsetsvariants'
    label: "All Sample Variants (.json)"
    description: "Download all variants of matched samples - potentially huge dataset..."
    h->o_key: 'biosamples._id'
    script_path_web: '/beacon/variants'
  callsetspgxseg:
    id: 'pgx:handover:callsetspgxseg'
    label: "All Sample Variants (.pgxseg)"
    description: "Download all variants of matched samples - potentially huge dataset..."
    h->o_key: 'biosamples._id'
    script_path_web: '/beacon/variants'
  UCSClink:   
    id: 'pgx:handover:bedfile2ucsc'
    label: "Show Variants in UCSC"
    description: "map variants matched by the query to the UCSC browser"
    h->o_key: 'variants._id'
    ext_url: 'http://genome.ucsc.edu/cgi-bin/hgTracks?org=human&db=hg38'
    remove_subdomain: True
  # queryaggregation:
  #   id: 'pgx:handover:queryaggregation'
  #   label: "Aggregate Query"
  #   description: "Start new query limited to the current samples"
  #   h->o_key: 'callsets._id'
  #   script_path_web: 'http://beacon.progenetix.org/ui/'
h->o_methods:
  biosamples._id:
    source_collection: biosamples
    source_key: _id
    target_collection: biosamples
    target_key: _id
  biosamples.id:
    source_collection: biosamples
    source_key: id
    target_collection: biosamples
    target_key: id
  bs.isid->biosamples.id:
    source_collection: biosamples
    source_key: id
    target_collection: biosamples
    target_key: id
  bs.isid->individuals.id:
    source_collection: biosamples
    source_key: individual_id
    target_collection: individuals
    target_key: id
  cs.id:
    source_collection: callsets
    source_key: id
    target_collection: callsets
    target_key: id
  callsets._id:
    source_collection: callsets
    source_key: _id
    target_collection: callsets
    target_key: _id
  callsets.bsid->biosamples.id:
    source_collection: callsets
    source_key: biosample_id
    target_collection: biosamples
    target_key: id
  individuals._id:
    source_collection: individuals
    source_key: _id
    target_collection: individuals
    target_key: _id
  individuals.id:
    source_collection: individuals
    source_key: id
    target_collection: individuals
    target_key: id
  variants._id:
    source_collection: variants
    source_key: _id
    target_collection: variants
    target_key: _id
  variants.bsid->biosamples.id:
    source_collection: variants
    source_key: biosample_id
    target_collection: biosamples
    target_key: id
  variants.bsid->variants._id:
    source_collection: variants
    source_key: biosample_id
    target_collection: variants
    target_key: _id
  vs.csid->cs.id:
    source_collection: variants
    source_key: callset_id
    target_collection: callsets
    target_key: id
  variants.digest:
    source_collection: variants
    source_key: digest
    target_collection: variants
    target_key: digest
  variants.variantannotation_id:
    source_collection: variants
    source_key: variantannotation_id
    target_collection: variants
    target_key: variantannotation_id

